ekf_filter_node:
  ros__parameters:
    frequency: 30.0
    two_d_mode: true
    publish_tf: true
    map_frame: map
    odom_frame: odom
    base_link_frame: base_link
    world_frame: odom  # 나중에 안정화되면 map으로 변경 추천

    # IMU 입력
    imu0: /imu/data
    imu0_remove_gravitational_acceleration: true
    imu0_config: [false, false, false,
                  true,  true,  true,  # Roll, Pitch, Yaw 사용
                  false, false, false,
                  true,  true,  true,  # Angular velocity 사용
                  false, false, false]

    # GPS 입력 (navsat에서 실시간으로 만들어줄 토픽)
    odom0: /odometry/gps
    odom0_config: [true,  true,  false, # X, Y 위치 사용
                   false, false, false,
                   false, false, false,
                   false, false, false,
                   false, false, false]

navsat_transform:
  ros__parameters:
    use_sim_time: true
    use_odometry_yaw: true               # 안정적인 방향 계산을 위해 추가
    wait_for_datum: false                # 첫 GPS 지점을 원점으로 사용
    publish_filtered_gps: true
    yaw_offset: 1.5708                   # ENU/NED 좌표계 변환 보정
    magnetic_declination_radians: 0.148  # 진북-자북 오차 보정 (한국 기준)
    zero_altitude: true                  # 2D 주행 시 필수 (Z축 폭주 방지)


    # 입력 토픽 이름 리매핑 (중요!)
    gps_input_topic: /ublox_gps_node/fix
    imu_input_topic: /imu/data
    odom_input_topic: /odometry/filtered
