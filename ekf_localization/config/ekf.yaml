ekf_filter_node:
  ros__parameters:
    frequency: 100.0
    two_d_mode: true
    publish_tf: true
    map_frame: map
    odom_frame: odom
    base_link_frame: base_link
    world_frame: odom

    # IMU 입력 설정
    imu0: /imu/data
    imu0_remove_gravitational_acceleration: true
    
    # [확인] Orientation을 true로 했으므로 IMU의 절대 각도를 믿고 사용합니다.
    imu0_config: [false, false, false,
                  true,  true,  false,  # Roll, Pitch, Yaw 사용
                  false, false, false,
                  true,  true,  true,  
                  true,  true,  true]  

    imu0_relative: false               # [수정] 절대 각도(북쪽 기준)를 사용하도록 false 설정
    imu0_queue_size: 10

    # GPS 입력
    odom0: /odometry/gps
    odom0_config: [true,  true,  false, 
                   false, false, false,
                   false, false, false,
                   false, false, false,
                   false, false, false]
    odom0_queue_size: 10

navsat_transform:
  ros__parameters:
    use_sim_time: false    
    use_odometry_yaw: false 
    wait_for_datum: false
    publish_filtered_gps: true
    # [중요] IMU가 북쪽을 0으로 줄 때, ROS 좌표계(동쪽 0도)에 맞추려면 보통 1.57(90도)을 넣습니다.
    yaw_offset: -1.57 
    magnetic_declination_radians: 0.0 
    zero_altitude: true 
    
    gps_input_topic: /ublox_gps_node/fix
    imu_input_topic: /imu/data
    odom_input_topic: /odometry/filtered
